{"version":3,"names":["_react","require","_WorkletsProxy","_SkiaProxy","_withFrameRefCounting","_VisionCameraProxy","withRotatedFrame","frame","canvas","func","save","orientation","translate","height","width","rotate","Error","restore","getSurfaceSize","createSkiaFrameProcessor","frameProcessor","surfaceHolder","offscreenTextures","Skia","SkiaProxy","Worklets","WorkletsProxy","getSkiaSurface","_surfaceHolder$value$","_surfaceHolder$value$2","_surfaceHolder$value$4","threadId","getCurrentThreadId","size","value","_surfaceHolder$value$3","surface","Surface","MakeOffscreen","dispose","createDrawableProxy","nativeBuffer","getNativeBuffer","image","Image","MakeImageFromNativeBuffer","pointer","canvasProxy","Proxy","get","_","property","paint","drawImage","delete","withBaseClass","withFrameRefCounting","getCanvas","drawableFrame","black","Color","clear","flush","snapshot","makeImageSnapshot","snapshotCopy","makeNonTextureImage","push","length","texture","shift","type","useSkiaFrameProcessor","dependencies","useSharedValue","useEffect","_VisionCameraProxy$wo","VisionCameraProxy","workletContext","runAsync","surfaces","Object","values","map","v","forEach","s","useMemo"],"sourceRoot":"../../../src","sources":["skia/useSkiaFrameProcessor.ts"],"mappings":"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"}